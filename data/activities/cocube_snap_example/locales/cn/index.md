### 1. 案例目的
掌握多机器人集群控制技术，通过编程实现四个 CoCube 机器人在不同规格地图上的协同编队和循环运动，体验精确的多机器人协调控制！

### 2. 使用材料

![CoCube 机器人 × 4](robot.png =200x*)
![个人电脑 或 平板](PC.png =250x*)
![基站](cudy.png =250x*)

![300x200 地图](map_300200.png =400x*)

### 3. 软件平台

1. [MicroBlocks——CoCube & CoCube Module](https://microblocks.cocube.fun#scripts=GP%20Scripts%0Adepends%20%27CoCube%27%20%27CoCube%20Module%27)

![](image-2.png)

2. [Snap](http://snap.codelab.club/snap.html)

![](img3.png)

### 4. 环境准备

1. **铺设地图：** 选择合适的平坦区域，铺设 300x200 或 600x600 规格的定位地图
2. **启动基站：** 按照基础教程的方法启动基站，并将电脑连接到基站网络
   - 💡 **小提示**：可以选择有线连接或WiFi连接，确保网络稳定

![](map_setup.png)

### 5. 配置四个机器人

为了便于管理，我们给四个机器人分别设置ID：1, 2, 3, 4

1. **逐个连接机器人：** 用数据线或蓝牙连接每个 CoCube 机器人到 MicroBlocks 编程环境
2. **设置机器人参数：** 为每个机器人依次设置：
   - 唯一的机器人ID（1号、2号、3号、4号）
   - 相同的WiFi连接信息
   - 相同的路由器地址（默认192.168.10.1）
3. **验证连接：** 确保四个机器人都成功获得IP地址并显示在积木块上

⚠️ **重要提醒**：每个机器人的ID必须不同，但WiFi信息要完全一样！

### 6. 300x200地图直线编队控制

#### 6.1 导入控制程序

1. **下载示例程序：** <a href="cocube_snap_example1.xml" download="cocube_snap_example1.xml">点击下载示例程序 1</a>
2. **导入到Snap：** 打开 Snap网站，将 `cocube_snap_example1.xml` 文件拖到窗口中
3. **查看机器人角色：** 你会看到文件已经创建好了带有编号的四个机器人角色！

![](snap1.png)

#### 6.2 开始执行编队控制

1. **了解控制按键：** 点击右侧的舞台，可以看到预设的控制指令：
   - 点击小绿旗：连接四个机器人
   - 按键盘"1"：移动到起始点  
   - 按键盘"2"：开始排成直线
   - 按键盘"3"：排列成圆形
   - 按键盘"4"：圆形环绕运动

![](snap2.png =600x*)

2. **开始控制：** 
   - 首先点击右上角小绿旗按钮连接机器人
   - 连接成功后，Snap右上角会显示机器人实时位置，移动实体机器人会看到位置同步变化！
   
![](snap3.png =300x*)

   - 然后按下键盘数字键"1-4"来执行不同的编队动作,实现下面视频的效果

<video width="320" height="240" controls>
  <source src="video_720p.mp4" type="video/mp4">
</video>

3. **自定义编程：** 想要修改动作？点击任意机器人角色，然后拖动左边的积木块来创建你自己的编队程序！

### 7. 第四步：600x600地图探索挑战

通过上面的例子，你已经掌握了多机器人集群控制的基本方法！现在来挑战更大的地图吧！

**下载大地图程序：** <a href="cocube_snap_example2.xml" download="cocube_snap_example2.xml">点击下载示例程序 2</a>

这个程序包含了：
- 600x600地图的坐标映射
- 八个机器人的基础控制框架  
- 可扩展的编程积木组合

### 8. 挑战时间 🚀

现在你已经是多机器人控制专家了！试试这些高级挑战：
- 编程让四个机器人组成方阵进行复杂图形运动
- 创建机器人"蛇形"编队，让它们像游戏贪吃蛇一样移动
- 设计机器人接力赛，让它们依次完成不同的任务点
- 你能想出什么更酷的集群控制玩法吗？快来创造吧！